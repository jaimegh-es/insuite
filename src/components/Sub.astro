---
---
<!-- Newsletter Subscription Modal -->
<div id="newsletter-modal" class="newsletter-overlay" style="display: none;">
  <div class="newsletter-card">
    <button id="close-newsletter" class="close-btn" title="Cerrar">&times;</button>
    
    <!-- Brevo Form Start -->
    <div class="sib-form">
      <div id="sib-form-container" class="sib-form-container">
        <div id="error-message" class="sib-form-message-panel">
          <div class="sib-form-message-panel__text sib-form-message-panel__text--center">
            <svg viewBox="0 0 512 512" class="sib-icon sib-notification__icon">
              <path d="M256 40c118.621 0 216 96.075 216 216 0 119.291-96.61 216-216 216-119.244 0-216-96.562-216-216 0-119.203 96.602-216 216-216m0-32C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm-11.49 120h22.979c6.823 0 12.274 5.682 11.99 12.5l-7 168c-.268 6.428-5.556 11.5-11.99 11.5h-8.979c-6.433 0-11.722-5.073-11.99-11.5l-7-168c-.283-6.818 5.167-12.5 11.99-12.5zM256 340c-15.464 0-28 12.536-28 28s12.536 28 28 28 28-12.536 28-28-12.536-28-28-12.536-28-28-28z" />
            </svg>
            <span class="sib-form-message-panel__inner-text">
                              No hemos podido validar su suscripción.
                          </span>
          </div>
        </div>
        <div></div>
        <div id="success-message" class="sib-form-message-panel">
          <div class="sib-form-message-panel__text sib-form-message-panel__text--center">
            <svg viewBox="0 0 512 512" class="sib-icon sib-notification__icon">
              <path d="M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 464c-118.664 0-216-96.055-216-216 0-118.663 96.055-216 216-216 118.664 0 216 96.055 216 216 0 118.663-96.055 216-216 216zm141.63-274.961L217.15 376.071c-4.705 4.667-12.303 4.637-16.97-.068l-85.878-86.572c-4.667-4.705-4.637-12.303.068-16.97l8.52-8.451c4.705-4.667 12.303-4.637 16.97.068l68.976 69.533 163.441-162.13c4.705-4.667 12.303-4.637 16.97.068l8.451 8.52c4.668 4.705 4.637 12.303-.068 16.97z" />
            </svg>
            <span class="sib-form-message-panel__inner-text">
                              Se ha realizado su suscripción.
                          </span>
          </div>
        </div>
        <div></div>
        <div id="sib-container" class="sib-container--large sib-container--vertical" style="direction:ltr">
          <form id="sib-form" method="POST" action="https://7c0cb458.sibforms.com/serve/MUIFAPqS4aMwyG9eiASS-LRNOT1zsY2xefVUxEuu2jAL8znxvos7hP7gQsASGgyC6FdUHJvi2SOr4NUmxUqmkcBOTRyGUZauKcn6dvP24DSLYDmXnHyIO3ZToBhJ6PGaE5JnYTdECW_d6ezFdrjwEmRihA2TkJsf8HueD3VesU8vkYGa_1iHNFWwq3yvrRD7gVXgiEj2l8rib1CL5A==" data-type="subscription">
            <div style="padding: 8px 0;">
              <div class="sib-form-block">
                <h2>Buenas!</h2>
              </div>
            </div>
            <div style="padding: 8px 0;">
              <div class="sib-form-block">
                <div class="sib-text-form-block">
                  <p>Ofrecemos la InSuite de manera gratuita y sin anuncios. A cambio, nos haría ilusión que te suscribieras a nuestra newsletter.</p>
                  <p>No mandamos spam, solamente recibirás novedades e innovaciones importantes.</p>
                </div>
              </div>
            </div>
            <div style="padding: 8px 0;">
              <div class="sib-input sib-form-block">
                <div class="form__entry entry_block">
                  <div class="form__label-row ">
                    <label class="entry__label" for="EMAIL" data-required="*">Déjanos tu email y descubre novedades antes que nadie</label>
    
                    <div class="entry__field">
                      <input class="input " type="text" id="EMAIL" name="EMAIL" autocomplete="off" placeholder="Tu mejor email..." data-required="true" required />
                    </div>
                  </div>
    
                  <label class="entry__error entry__error--primary"></label>
                </div>
              </div>
            </div>
            <div style="padding: 8px 0;">
              <div class="sib-form-block">
                <button class="sib-form-block__button sib-form-block__button-with-loader" form="sib-form" type="submit">
                  <svg class="icon clickable__icon progress-indicator__icon sib-hide-loader-icon" viewBox="0 0 512 512">
                    <path d="M460.116 373.846l-20.823-12.022c-5.541-3.199-7.54-10.159-4.663-15.874 30.137-59.886 28.343-131.652-5.386-189.946-33.641-58.394-94.896-95.833-161.827-99.676C261.028 55.961 256 50.751 256 44.352V20.309c0-6.904 5.808-12.337 12.703-11.982 83.556 4.306 160.163 50.864 202.11 123.677 42.063 72.696 44.079 162.316 6.031 236.832-3.14 6.148-10.75 8.461-16.728 5.01z" />
                  </svg>
                  SUSCRIBIRSE
                </button>
              </div>
            </div>
    
            <input type="text" name="email_address_check" value="" class="input--hidden">
            <input type="hidden" name="locale" value="es">
          </form>
        </div>
      </div>
    </div>
    <!-- Brevo Form End -->
  </div>
</div>

<!-- Brevo Styles -->
<link rel="stylesheet" href="https://sibforms.com/forms/end-form/build/sib-styles.css">

<style>
  /* Modal Overlay */
  .newsletter-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(15, 23, 42, 0.8);
    z-index: 99999;
    display: flex;
    justify-content: center;
    align-items: center;
    backdrop-filter: blur(8px);
    padding: 1.5rem;
  }

  /* Modal Card - Styled like Home cards */
  .newsletter-card {
    position: relative;
    width: 100%;
    max-width: 500px;
    background: #ffffff;
    border-radius: 1.5rem;
    padding: 2.5rem;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    animation: fadeInScale 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    overflow: hidden;
  }

  .newsletter-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 6px;
    background: linear-gradient(90deg, #2E5BFF, #00B4D8);
  }

  /* Close Button */
  .close-btn {
    position: absolute;
    top: 1.25rem;
    right: 1.25rem;
    width: 2rem;
    height: 2rem;
    background: #f1f5f9;
    color: #64748b;
    border: none;
    border-radius: 50%;
    font-size: 1.25rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    z-index: 10;
  }
  
  .close-btn:hover {
      background: #e2e8f0;
      color: #1e293b;
      transform: rotate(90deg);
  }

  @keyframes fadeInScale {
    from { opacity: 0; transform: scale(0.95) translateY(10px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
  }
  
  /* Overrides for Brevo form to match landing page */
  #sib-container {
    padding: 0 !important;
    background-color: transparent !important;
  }

  .sib-form-block p {
    margin: 0;
  }

  .sib-form-block h2 {
    font-size: 1.875rem !important;
    font-weight: 700 !important;
    color: #0f172a !important;
    margin-bottom: 0.75rem !important;
    line-height: 1.2 !important;
  }

  .sib-text-form-block {
    font-size: 1.125rem !important;
    color: #475569 !important;
    line-height: 1.6 !important;
  }

  .entry__label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600 !important;
    color: #1e293b !important;
    font-size: 0.875rem !important;
  }

  .entry__field input {
    width: 100%;
    padding: 0.75rem 1rem !important;
    border: 2px solid #e2e8f0 !important;
    border-radius: 0.75rem !important;
    font-size: 1rem !important;
    transition: all 0.2s ease !important;
    background-color: #f8fafc !important;
    color: #1e293b !important;
  }

  .entry__field input:focus {
    outline: none !important;
    border-color: #2E5BFF !important;
    background-color: #ffffff !important;
    box-shadow: 0 0 0 4px rgba(46, 91, 255, 0.1) !important;
  }

  .sib-form-block__button {
    width: 100%;
    padding: 0.875rem !important;
    background: linear-gradient(135deg, #2E5BFF 0%, #00B4D8 100%) !important;
    color: #ffffff !important;
    border-radius: 0.75rem !important;
    font-weight: 600 !important;
    font-size: 1rem !important;
    border: none !important;
    cursor: pointer !important;
    transition: all 0.2s ease !important;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
    margin-top: 1rem !important;
  }

  .sib-form-block__button:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
  }

  .sib-form-message-panel {
    border-radius: 0.75rem !important;
    margin-bottom: 1.5rem !important;
  }
</style>

<script>
  // Logic to handle modal display
  function initNewsletterModal() {
      const modal = document.getElementById('newsletter-modal');
      const closeBtn = document.getElementById('close-newsletter');
      const STORAGE_KEY = 'inled_newsletter_dismissed_v2';
      const DELAY_MS = 3000; // Show after 3 seconds

      if (!modal) return;

      // Check if user has already dismissed
      if (localStorage.getItem(STORAGE_KEY) === 'true') {
          return;
      }

      // Show modal after delay
      setTimeout(() => {
          modal.style.display = 'flex';
      }, DELAY_MS);

      // Close handler
      closeBtn?.addEventListener('click', () => {
          modal.style.display = 'none';
          localStorage.setItem(STORAGE_KEY, 'true');
      });

      // Close on click outside
      modal?.addEventListener('click', (e) => {
          if (e.target === modal) {
              modal.style.display = 'none';
              localStorage.setItem(STORAGE_KEY, 'true'); 
          }
      });
  }

  if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initNewsletterModal);
  } else {
      initNewsletterModal();
  }
      
  // Brevo script integration logic
  window.REQUIRED_CODE_ERROR_MESSAGE = 'Elija un código de país';
  window.LOCALE = 'es';
  window.EMAIL_INVALID_MESSAGE = window.SMS_INVALID_MESSAGE = "La información que ha proporcionado no es válida. Compruebe el formato del campo e inténtelo de nuevo.";
  window.REQUIRED_ERROR_MESSAGE = "Este campo no puede quedarse vacío. ";
  window.GENERIC_INVALID_MESSAGE = "La información que ha proporcionado no es válida. Compruebe el formato del campo e inténtelo de nuevo.";

  window.translation = {
    common: {
      selectedList: '{quantity} lista seleccionada',
      selectedLists: '{quantity} listas seleccionadas',
      selectedOption: '{quantity} seleccionado',
      selectedOptions: '{quantity} seleccionados',
    }
  };
</script>

<!-- Load Brevo Script -->
<script defer src="https://sibforms.com/forms/end-form/build/main.js"></script>
